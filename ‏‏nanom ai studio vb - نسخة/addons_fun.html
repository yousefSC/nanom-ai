<!-- Alarm Widget -->
<div id="alarm-widget" class="floating-widget">
    <div class="widget-header">
        <span>ğŸ”” Smart Alarm</span>
        <button onclick="this.closest('.floating-widget').classList.remove('active')">Ã—</button>
    </div>
    <div class="widget-body">
        <input type="time" id="alarm-time" class="custom-input">
        <button class="btn-primary" onclick="addonManager.setAlarm()">Set Alarm</button>
        <div id="alarm-status" style="margin-top:10px; font-size:0.8rem; color:var(--text-secondary);">No alarm set
        </div>
    </div>
</div>

<!-- Sticky Notes Manager Widget -->
<div id="stickynotes-widget" class="floating-widget">
    <div class="widget-header"><span>ğŸ“ Notes</span><button
            onclick="this.closest('.floating-widget').classList.remove('active')">Ã—</button></div>
    <div class="widget-body" style="display:flex; gap:10px;">
        <button class="btn-sml" style="background:#fef08a; color:black; width:30px; height:30px;"
            onclick="addonManager.addSticky('#fef08a')"></button>
        <button class="btn-sml" style="background:#fbcfe8; color:black; width:30px; height:30px;"
            onclick="addonManager.addSticky('#fbcfe8')"></button>
        <button class="btn-sml" style="background:#bae6fd; color:black; width:30px; height:30px;"
            onclick="addonManager.addSticky('#bae6fd')"></button>
    </div>
</div>

<!-- Sticky Note Template -->
<div id="sticky-container"></div>

<!-- Counter Widget -->
<div id="counter-widget" class="floating-widget">
    <div class="widget-header"><span>ğŸ”¢ Counter</span><button
            onclick="this.closest('.floating-widget').classList.remove('active')">Ã—</button></div>
    <div class="widget-body" style="text-align:center;">
        <div id="counter-val" style="font-size:2.5rem; font-weight:bold; margin:15px 0;">0</div>
        <div style="display:flex; gap:5px; justify-content:center;">
            <button class="btn-sml btn-secondary" onclick="addonManager.updateCounter(-1)">-</button>
            <button class="btn-sml btn-primary" onclick="addonManager.updateCounter(1)">+</button>
            <button class="btn-sml btn-secondary" onclick="addonManager.updateCounter(0)">Reset</button>
        </div>
    </div>
</div>

<!-- Stopwatch Widget -->
<div id="stopwatch-widget" class="floating-widget">
    <div class="widget-header"><span>â±ï¸ Stopwatch</span><button
            onclick="this.closest('.floating-widget').classList.remove('active')">Ã—</button></div>
    <div class="widget-body" style="text-align:center;">
        <div id="sw-display" style="font-size:2rem; font-family:monospace; margin:10px 0;">00:00:00</div>
        <div style="display:flex; gap:5px; justify-content:center;">
            <button class="btn-sml btn-primary" onclick="addonManager.toggleStopwatch()">Start/Stop</button>
            <button class="btn-sml btn-secondary" onclick="addonManager.resetStopwatch()">Reset</button>
        </div>
    </div>
</div>

<!-- Cursor Modal -->
<div class="modal-overlay" id="cursor-modal">
    <div class="modal-content glass-panel" style="max-width:500px;">
        <div class="modal-header">
            <h3>ğŸ‘† Cursor Changer</h3><button class="close-modal">Ã—</button>
        </div>
        <div class="modal-body">
            <div class="cursor-grid" style="display:grid; grid-template-columns:repeat(3,1fr); gap:10px;">
                <button class="btn-secondary" onclick="addonManager.setCursor('default')">Default</button>
                <button class="btn-secondary" onclick="addonManager.setCursor('pointer')">Pointer</button>
                <button class="btn-secondary" onclick="addonManager.setCursor('crosshair')">Crosshair</button>
                <button class="btn-secondary" onclick="addonManager.setCursor('text')">Text</button>
                <button class="btn-secondary" onclick="addonManager.setCursor('move')">Move</button>
                <button class="btn-secondary" onclick="addonManager.setCursor('wait')">Wait</button>
                <button class="btn-secondary" onclick="addonManager.setCursor('help')">Help</button>
                <button class="btn-secondary" onclick="addonManager.setCursor('not-allowed')">Block</button>
            </div>
        </div>
    </div>
</div>

<!-- Key Sounds Modal -->
<div class="modal-overlay" id="keysounds-modal">
    <div class="modal-content glass-panel" style="max-width:400px;">
        <div class="modal-header">
            <h3>âŒ¨ï¸ Key Sounds</h3><button class="close-modal">Ã—</button>
        </div>
        <div class="modal-body" style="display:flex; flex-direction:column; gap:15px;">
            <label class="setting-row" style="justify-content:space-between; display:flex;">
                <span>Enable Sounds</span>
                <input type="checkbox" id="keysound-toggle" onchange="addonManager.toggleKeySounds(this.checked)">
            </label>
            <div class="sound-opts" style="display:flex; gap:10px; flex-wrap:wrap;">
                <button class="btn-secondary" onclick="addonManager.setKeySound('typewriter')">Typewriter</button>
                <button class="btn-secondary" onclick="addonManager.setKeySound('mechanical')">Mechanical</button>
                <button class="btn-secondary" onclick="addonManager.setKeySound('water')">Water</button>
            </div>
        </div>
    </div>
</div>

<!-- Screen Effects Modal -->
<div class="modal-overlay" id="effects-modal">
    <div class="modal-content glass-panel" style="max-width:400px;">
        <div class="modal-header">
            <h3>ğŸŒ§ï¸ Screen Effects</h3><button class="close-modal">Ã—</button>
        </div>
        <div class="modal-body" style="display:flex; flex-direction:column; gap:10px;">
            <button class="btn-secondary full-width" onclick="addonManager.toggleEffect('rain')">ğŸŒ§ï¸ Rain</button>
            <button class="btn-secondary full-width" onclick="addonManager.toggleEffect('matrix')">ğŸ’» Matrix</button>
            <button class="btn-secondary full-width" onclick="addonManager.toggleEffect('confetti')">ğŸ‰
                Confetti</button>
            <button class="btn-primary full-width" onclick="addonManager.toggleEffect('none')">âŒ Clear All</button>
        </div>
    </div>
</div>

<!-- Battery Widget -->
<div id="battery-widget" class="floating-widget" style="width: auto;">
    <div class="widget-header"><span>ğŸ”‹ System</span><button
            onclick="this.closest('.floating-widget').classList.remove('active')">Ã—</button></div>
    <div class="widget-body" style="font-size:0.9rem; padding:15px;">
        <div id="battery-level" style="font-size:1.2rem; font-weight:bold; margin-bottom:5px;">Checking...</div>
        <div id="system-time" style="color:var(--text-secondary);">00:00:00</div>
    </div>
</div>

<!-- Dice Widget -->
<div id="dice-widget" class="floating-widget">
    <div class="widget-header"><span>ğŸ² Dice</span><button
            onclick="this.closest('.floating-widget').classList.remove('active')">Ã—</button></div>
    <div class="widget-body" style="text-align:center;">
        <div id="dice-result" style="font-size:4rem; margin:10px; min-height:60px;">ğŸ²</div>
        <button class="btn-primary" onclick="addonManager.rollDice()">Roll</button>
    </div>
</div>

<!-- Effect Container -->
<canvas id="effect-canvas"
    style="position:fixed; top:0; left:0; width:100%; height:100%; pointer-events:none; z-index:9000; display:none;"></canvas>

<!-- Reading Mode Overlay -->
<div id="reading-guide"
    style="position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.5); pointer-events:none; z-index:9999; display:none;">
    <div id="reading-line"
        style="width:100%; height:100px; background:rgba(255,255,255,0.05); border-top:1px solid rgba(255,255,255,0.2); border-bottom:1px solid rgba(255,255,255,0.2); position:absolute; top:50%; transform:translateY(-50%); box-shadow: 0 0 100px rgba(0,0,0,0.8);">
    </div>
</div>
<div id="reading-mode-off" style="position:fixed; bottom:20px; right:20px; z-index:10000; display:none;">
    <button class="btn-primary" onclick="addonManager.toggleReadingMode(false)">Exit Reading Mode</button>
</div>